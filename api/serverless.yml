service: cdktf-test
frameworkVersion: "3"

plugins:
  - serverless-plugin-typescript
  - serverless-offline

provider:
  name: aws
  runtime: nodejs14.x
  stage: dev
  memorySize: 2048
  timeout: 15
  region: ap-southeast-1
  vpc:
    securityGroupIds:
      - sg-0031ce33f11c54739
    subnetIds:
      - subnet-07c75abeb0bdfa494
      - subnet-015edebfd5493f731
      - subnet-00bb60add513bb115
  deploymentBucket:
    name: onewallet-cdktf-test

functions:
  hello:
    handler: index.handler
    events:
      - http:
          path: /graphql
          method: post
          cors: true
      - http:
          path: /graphql
          method: get
          cors: true
    environment:
      MONGO_URI: mongodb+srv://onewallet_user_test:TNsK2IlOyHg3a3VuaAH3@rod-cdktf-test.p8asv.mongodb.net/?ssl=true&authSource=admin
